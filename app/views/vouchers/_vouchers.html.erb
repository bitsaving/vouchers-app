<div class="page-header">

</div>
<% if @vouchers.count > 0 %>
<table class="table table-striped account_vouchers">
  <thead>
    <tr>
      <th width= "5%"><%= "Id" %></th>
      <th width= "20%"><%= "Debit" %></th>
      <th width= "20%"><%= "Credit" %></th>
      <th width= "10%"><%= "Date" %></th>
      <th width= "10%"><%= "Amount" %></th>
      <th width= "10%"h><%= "Assigned" %></th>
      <th width= "10%"><%= "State" %></th>
      <th width= "15%"><%= "Actions" %></th>
    </tr>
  </thead>
  <tbody>
  <% @vouchers.each do |voucher| %>
    <tr>
      <td><%= link_to voucher.id, voucher_path(voucher) %></td>
      <td><%= link_to voucher.debit_from.name,account_path(getAccount(voucher.account_debited)),:class=>'debit_credit'%></td>
      <td><% if(!(voucher.credit_to.nil?)) %>
    <%= link_to voucher.credit_to.name,account_path(getAccount(voucher.account_credited)),:class=>'debit_credit' %></td>
      <%end%>
      <td><%= format_date(voucher.date)%></td>
      <td><%= number_to_currency(voucher.amount,:unit=>"â‚¹ ")%></td>
      <% if voucher.assigned_to.nil? %>
      <td> <%=" "%>
      <%else%>
      <td><%= voucher.assigned_to.first_name%></td>
        <%end%>
       <td><%= voucher.workflow_state%></td> 
      <td>
        <% if voucher.creator_id == current_user.id && (voucher.current_state == :new || voucher.current_state == :rejected) %>
          <%= link_to "Edit",
                    edit_voucher_path(voucher), :class => 'btn btn-mini btn-primary' %>
          <%= link_to "Delete",voucher_path(voucher),:method => :delete,:data => { :confirm => 'Are you sure?'},:class => 'btn btn-mini btn-danger' %>
        <%end%>
        <%= link_to "Details",voucher_path(voucher), :class => 'btn btn-mini btn-primary' %>
      </td>
    </tr>
  <% end %> 
  </tbody>
</table>
<%= paginate @vouchers, :remote => true %>
<%end%>